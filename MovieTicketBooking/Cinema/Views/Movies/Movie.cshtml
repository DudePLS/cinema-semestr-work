@using Cinema.ViewModels
@model MovieCommentViewModel
@{
    var ratingSum = ViewBag.RatingSum;
    var ratingCount = ViewBag.RatingCount;
    decimal rating = 0;
    if (ratingCount > 0)
    {
        rating = (ratingSum / ratingCount);
    }
    var totalRating = decimal.Parse(rating.ToString());
}
<!DOCTYPE HTML>
<html>
<head>
    <title>Movie_store A Entertainment Category Flat Bootstarp Resposive Website Template | Single :: w3layouts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Movie_store Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
    <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <link href="~/css/bootstrap.css" rel='stylesheet' type='text/css' />
    <link href="~/css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="~/assets/dist/css/bootstrap1.min.css" rel="stylesheet">
    <!-- start plugins -->
    <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:100,200,300,400,500,600,700,800,900' rel='stylesheet' type='text/css'>
</head>
<body>
    <div class="container">
        <div class="container_wrap">
            <div class="header_top">
                <div class="col-sm-3 logo"><a href="index.html"><img src="images/logo.png" alt="" /></a></div>
                <div class="clearfix"> </div>
            </div>
            <div class="content">
                <div class="movie_top">
                    <div class="col-md-9 movie_box">
                        <div class="grid images_3_of_2">
                            <div class="movie_image">
                                <span class="movie_rating">5.0</span>
                                <img src="data:image/jpeg;base64,@(Convert.ToBase64String(@Model.Movie.Image))" class="img-responsive" alt="" />
                            </div>
                        </div>
                        <div class="desc1 span_3_of_2">
                            <p class="movie_option"><strong>Дата выхода: </strong>@Html.DisplayFor(model => model.Movie.ReleaseDate)</p>
                            <p class="movie_option"><strong>Жанр: </strong><a href="#">@Model.Movie.Genre</a>
                            <p class="movie_option"><strong>Ограничение по возрасту: </strong>@Model.Movie.Rating</p>
                            <p class="movie_option"><strong>Описание: </strong>@Model.Movie.Description</p>
                            <div class="btn1"><button class="btn btn-sm btn-outline-secondary"><span> </span>Купить билеты</button></div>
                        </div>

                    </div>
                    <div class="col-md-3">

                    </div>

                </div>

            </div>
        </div>
    </div>
</body>
@{//<div>
    //  <span class="starFadeN" id="sRate1"></span><span class="starFadeN" id="sRate2"></span><span class="starFadeN" id="sRate3"></span><span class="starFadeN" id="sRate4"></span><span class="starFadeN" id="sRate5"></span>
    //</div>
}
@foreach (var c in Model.Comments)
{
    <hr />
    <div class="row">
        <div class="col-md-3">
            <i>@c.PublishDate</i>
            <br />
            @for (var i = 1; i <= c.StarRating; i++)
            {
                <span class="starFadeN"></span>
            }
            @for (var i = (c.StarRating + 1); i <= 5; i++)
            {
                <span class="starGlowN"></span>
            }
        </div>
        <div class="col-md-9">
            @Html.Raw(c.Comment.Replace("\n", "<br />"))
        </div>
    </div>
}
<hr />
<partial name="_CommentBox" />


<script>
        function SCRate() {
            for (var i = 1; i <=@totalRating; i++) {
                $("#sRate" + i).attr('class', 'starGlowN');
            }
        }
        $(function () {
            SCRate();
        });

</script>

<style>
    .body-content {
        padding-left: 15px;
        padding-right: 15px;
    }

    .dl-horizontal dt {
        white-space: normal;
    }

    input,
    select,
    textarea {
        max-width: 280px;
    }

    .commentBox {
        background-color: #efefef;
        padding: 10px;
        border-radius: 10px;
    }

    .starFade {
        background-image: url('/img/StarFade.gif');
        min-width: 30px;
        min-height: 30px;
        display: inline-block;
        cursor: pointer;
    }

    .starFadeN {
        background-image: url('/img/StarFade.gif');
        min-width: 30px;
        min-height: 30px;
        display: inline-block;
    }

    .starGlow {
        background-image: url('/img/StarGlow.gif');
        min-width: 30px;
        min-height: 30px;
        display: inline-block;
        cursor: pointer;
    }

    .starFadeN {
        background-image: url('/img/StarGlow.gif');
        min-width: 30px;
        min-height: 30px;
        display: inline-block;
    }
</style>
</html>